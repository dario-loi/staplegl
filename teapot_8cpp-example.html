<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>StapleGL: teapot.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">StapleGL
   </div>
   <div id="projectbrief">Header-only C++20 OpenGL wrapper</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('teapot_8cpp-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">teapot.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#define STAPLEGL_DEBUG</span></div>
<div class="line"><span class="preprocessor">#include &quot;glad.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="staplegl_8hpp.html">staplegl.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;GLFW/glfw3.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;array&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;span&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// quick and dirty models as C headers.</span></div>
<div class="line"><span class="preprocessor">#include &quot;box.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;screen_quad.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;teapot_data.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// glm linear algebra library, NOT needed for staplegl, just for the example.</span></div>
<div class="line"><span class="preprocessor">#include &quot;glm.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;gtc/matrix_transform.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;gtc/type_ptr.hpp&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// stb_image in order to load up textures.</span></div>
<div class="line"><span class="preprocessor">#define STB_IMAGE_IMPLEMENTATION</span></div>
<div class="line"><span class="preprocessor">#include &quot;stb_image.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">        IMPORTANT: in order for the program to correctly compile, go to</span></div>
<div class="line"><span class="comment">        include/staplegl/modules/gl_functions.hpp and replace the placeholder</span></div>
<div class="line"><span class="comment">        with the provided OpenGL loader (&quot;glad.h&quot;).</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">*/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define STAPLEGL_TEAPOT_LOW_MSAA</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef STAPLEGL_TEAPOT_LOW_MSAA</span></div>
<div class="line">constexpr <span class="keyword">auto</span> <a name="a0"></a><a class="code" href="teapot_8cpp.html#a7875464aa829a96fb3e7b7be4c1001ad">MSAA</a> = <a name="a1"></a><a class="code" href="namespacestaplegl.html#a2d27f6fa7483d510588e9a271a4229dea96d5466956a3db605430cdde90cc4c80">staplegl::tex_samples::MSAA_X1</a>;</div>
<div class="line">constexpr <span class="keyword">auto</span> <a name="a2"></a><a class="code" href="teapot_8cpp.html#a6cf87ad83cee592c4a5efef522123a0c">MSAA_SAMPLES</a> = 1;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">constexpr <span class="keyword">auto</span> <a class="code" href="teapot_8cpp.html#a7875464aa829a96fb3e7b7be4c1001ad">MSAA</a> = <a name="a3"></a><a class="code" href="namespacestaplegl.html#a2d27f6fa7483d510588e9a271a4229dea79306d33e026d8bea20528d1cd94e157">staplegl::tex_samples::MSAA_X8</a>;</div>
<div class="line">constexpr <span class="keyword">auto</span> <a class="code" href="teapot_8cpp.html#a6cf87ad83cee592c4a5efef522123a0c">MSAA_SAMPLES</a> = 8;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// glfw callbacks</span></div>
<div class="line"><span class="keywordtype">void</span> <a name="a4"></a><a class="code" href="teapot_8cpp.html#a5180f7bf2b71421af837035824a8c8ac">framebuffer_size_callback</a>(GLFWwindow* window, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height);</div>
<div class="line"><span class="keywordtype">void</span> <a name="a5"></a><a class="code" href="teapot_8cpp.html#a2d03c6f2666863543429a06ef642fe6a">processInput</a>(GLFWwindow* window);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// initial window size</span></div>
<div class="line"><span class="keyword">const</span> int32_t <a name="a6"></a><a class="code" href="teapot_8cpp.html#a059fb670617db97dde9d0247f91bb4f4">SCR_WIDTH</a> = 1600;</div>
<div class="line"><span class="keyword">const</span> int32_t <a name="a7"></a><a class="code" href="teapot_8cpp.html#a852ed62ba9b4f83fc921ffcabcbcb743">SCR_HEIGHT</a> = 900;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// global luminosity to be updated by keypresses</span></div>
<div class="line"><span class="keywordtype">float</span> <a name="a8"></a><a class="code" href="teapot_8cpp.html#a488c00483fc02be1c9b617a0ff729c42">luminosity</a> = 50.0F; <span class="comment">// NOLINT</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// OpenGL debug callback</span></div>
<div class="line"><span class="keywordtype">void</span> GLAPIENTRY</div>
<div class="line"><a name="a9"></a><a class="code" href="teapot_8cpp.html#a5804d645f4ed9ff8069c7a182d5a3f16">MessageCallback</a>(GLenum source [[maybe_unused]],</div>
<div class="line">    GLenum type,</div>
<div class="line">    GLuint <span class="keywordtype">id</span> [[maybe_unused]],</div>
<div class="line">    GLenum severity,</div>
<div class="line">    GLsizei length [[maybe_unused]],</div>
<div class="line">    <span class="keyword">const</span> GLchar* message,</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">void</span>* userParam [[maybe_unused]])</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// if (type == GL_DEBUG_TYPE_PERFORMANCE || type == GL_DEBUG_TYPE_OTHER) {</span></div>
<div class="line">    <span class="comment">//     return;</span></div>
<div class="line">    <span class="comment">// }</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// skip non-errors</span></div>
<div class="line">    <span class="keywordflow">if</span> (severity == GL_DEBUG_SEVERITY_NOTIFICATION || type == GL_DEBUG_TYPE_PERFORMANCE || type == GL_DEBUG_TYPE_OTHER) {</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    fprintf(stderr, <span class="stringliteral">&quot;GL CALLBACK: %s type = 0x%x, severity = 0x%x,\nmessage = %s\n&quot;</span>, <span class="comment">// NOLINT</span></div>
<div class="line">        (type == GL_DEBUG_TYPE_ERROR ? <span class="stringliteral">&quot;** GL ERROR **&quot;</span> : <span class="stringliteral">&quot;&quot;</span>),</div>
<div class="line">        type, severity, message);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// print location of error</span></div>
<div class="line">    fprintf(stderr, <span class="stringliteral">&quot;source = 0x%x, id = %d\n&quot;</span>, source, <span class="keywordtype">id</span>); <span class="comment">// NOLINT</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">constexpr <span class="keyword">auto</span> <a name="a10"></a><a class="code" href="teapot_8cpp.html#ad226385a3534a996102879d543fe3ed7">calc_pyramid_levels</a>(uint32_t width, uint32_t height) -&gt; uint32_t</div>
<div class="line">{</div>
<div class="line">    uint32_t levels = 1;</div>
<div class="line">    <span class="keywordflow">while</span> (width &gt; 2 &amp;&amp; height &gt; 2) {</div>
<div class="line">        width /= 2;</div>
<div class="line">        height /= 2;</div>
<div class="line">        levels++;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> levels;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// global aspect ratio, used for the projection matrix, please don&#39;t do this in</span></div>
<div class="line"><span class="comment">// a real program.</span></div>
<div class="line"><span class="keywordtype">float</span> <a name="a11"></a><a class="code" href="teapot_8cpp.html#a5584bdb427edfe29e0c0c3753b619161">aspect_ratio</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(<a class="code" href="teapot_8cpp.html#a059fb670617db97dde9d0247f91bb4f4">SCR_WIDTH</a>) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(<a class="code" href="teapot_8cpp.html#a852ed62ba9b4f83fc921ffcabcbcb743">SCR_HEIGHT</a>); <span class="comment">// NOLINT</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">auto</span> <a name="a12"></a><a class="code" href="teapot_8cpp.html#a8216c1645620cdb2f629cde3ac02ffef">main</a>() -&gt; <span class="keywordtype">int</span></div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">    std::string_view <span class="keyword">const</span> hello_message {</div>
<div class="line">        <span class="stringliteral">&quot;Hello! This is a more complex example of staplegl usage, featuring the Utah Teapot model.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;Press the U and D keys to increase (U) and decrease (D) the luminosity of the light source.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;Play around with them to observe how the bloom effect changes.&quot;</span></div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    std::cout &lt;&lt; hello_message &lt;&lt; std::endl;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// shorten layout declarations a bit.</span></div>
<div class="line">    <span class="keyword">using namespace </span><a class="code" href="namespacestaplegl_1_1shader__data__type.html">staplegl::shader_data_type</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// glfw: initialize and configure</span></div>
<div class="line">    <span class="comment">// ------------------------------</span></div>
<div class="line">    glfwInit();</div>
<div class="line">    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 4);</div>
<div class="line">    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 6);</div>
<div class="line"> </div>
<div class="line">    glfwWindowHint(GLFW_SAMPLES, <a class="code" href="teapot_8cpp.html#a6cf87ad83cee592c4a5efef522123a0c">MSAA_SAMPLES</a>); <span class="comment">// MSAA</span></div>
<div class="line">    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __APPLE__</span></div>
<div class="line">    glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// glfw window creation</span></div>
<div class="line">    <span class="comment">// --------------------</span></div>
<div class="line">    GLFWwindow* window = glfwCreateWindow(<a class="code" href="teapot_8cpp.html#a059fb670617db97dde9d0247f91bb4f4">SCR_WIDTH</a>, <a class="code" href="teapot_8cpp.html#a852ed62ba9b4f83fc921ffcabcbcb743">SCR_HEIGHT</a>, <span class="stringliteral">&quot;Utah Teapot&quot;</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (window == <span class="keyword">nullptr</span>) {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Failed to create GLFW window&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        glfwTerminate();</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    glfwMakeContextCurrent(window);</div>
<div class="line">    glfwSetFramebufferSizeCallback(window, <a class="code" href="teapot_8cpp.html#a5180f7bf2b71421af837035824a8c8ac">framebuffer_size_callback</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// glad: load all OpenGL function pointers</span></div>
<div class="line">    <span class="comment">// ---------------------------------------</span></div>
<div class="line">    <span class="keywordflow">if</span> (gladLoadGLLoader(<span class="keyword">reinterpret_cast&lt;</span>GLADloadproc<span class="keyword">&gt;</span>(glfwGetProcAddress)) == 0) { <span class="comment">// NOLINT</span></div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Failed to initialize GLAD&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// enabe OpenGL features: depth test, MSAA, debug output, face culling</span></div>
<div class="line">    glEnable(GL_DEPTH_TEST);</div>
<div class="line">    glEnable(GL_DEBUG_OUTPUT);</div>
<div class="line">    glEnable(GL_CULL_FACE);</div>
<div class="line">    glEnable(GL_DEBUG_OUTPUT_SYNCHRONOUS);</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef STAPLEGL_DEBUG</span></div>
<div class="line">    glDebugMessageCallback(<a class="code" href="teapot_8cpp.html#a5804d645f4ed9ff8069c7a182d5a3f16">MessageCallback</a>, <span class="keyword">nullptr</span>);</div>
<div class="line">    glDebugMessageControl(GL_DONT_CARE, GL_DONT_CARE, GL_DONT_CARE, 0, <span class="keyword">nullptr</span>, GL_TRUE);</div>
<div class="line">    std::clog &lt;&lt; <span class="stringliteral">&quot;Printing OpenGL version info:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::clog &lt;&lt; <span class="stringliteral">&quot;OpenGL version: &quot;</span> &lt;&lt; glGetString(GL_VERSION) &lt;&lt; std::endl;</div>
<div class="line">    std::clog &lt;&lt; <span class="stringliteral">&quot;OpenGL vendor: &quot;</span> &lt;&lt; glGetString(GL_VENDOR) &lt;&lt; std::endl;</div>
<div class="line">    std::clog &lt;&lt; <span class="stringliteral">&quot;OpenGL renderer: &quot;</span> &lt;&lt; glGetString(GL_RENDERER) &lt;&lt; std::endl;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Set up all the shaders</span></div>
<div class="line">    <a name="_a13"></a><a class="code" href="classstaplegl_1_1shader__program.html">staplegl::shader_program</a> teapot_shader { <span class="stringliteral">&quot;teapot_shader&quot;</span>, <span class="stringliteral">&quot;./shaders/teapot_shader.glsl&quot;</span> };</div>
<div class="line">    <a class="code" href="classstaplegl_1_1shader__program.html">staplegl::shader_program</a> skybox_shader { <span class="stringliteral">&quot;skybox_shader&quot;</span>, <span class="stringliteral">&quot;./shaders/skybox_shader.glsl&quot;</span> };</div>
<div class="line">    <a class="code" href="classstaplegl_1_1shader__program.html">staplegl::shader_program</a> light_shader { <span class="stringliteral">&quot;light_shader&quot;</span>, <span class="stringliteral">&quot;./shaders/light_shader.glsl&quot;</span> };</div>
<div class="line">    <a class="code" href="classstaplegl_1_1shader__program.html">staplegl::shader_program</a> tonemap_shader { <span class="stringliteral">&quot;tone_mapping&quot;</span>, <span class="stringliteral">&quot;./shaders/tone_mapping.glsl&quot;</span> };</div>
<div class="line">    <a class="code" href="classstaplegl_1_1shader__program.html">staplegl::shader_program</a> downsample_shader { <span class="stringliteral">&quot;downsample&quot;</span>, <span class="stringliteral">&quot;./shaders/downsample_shader.glsl&quot;</span> };</div>
<div class="line">    <a class="code" href="classstaplegl_1_1shader__program.html">staplegl::shader_program</a> upsample_shader { <span class="stringliteral">&quot;upsample&quot;</span>, <span class="stringliteral">&quot;./shaders/upsample_shader.glsl&quot;</span> };</div>
<div class="line">    <a class="code" href="classstaplegl_1_1shader__program.html">staplegl::shader_program</a> passthrough_shader { <span class="stringliteral">&quot;passthrough&quot;</span>, <span class="stringliteral">&quot;./shaders/passthrough_shader.glsl&quot;</span> };</div>
<div class="line"> </div>
<div class="line">    skybox_shader.<a name="a14"></a><a class="code" href="classstaplegl_1_1shader__program.html#a3fd31dc04f01b13cc0caeb7cb8f99148">bind</a>();</div>
<div class="line">    skybox_shader.upload_uniform1i(<span class="stringliteral">&quot;skybox&quot;</span>, 0);</div>
<div class="line"> </div>
<div class="line">    teapot_shader.bind();</div>
<div class="line">    teapot_shader.upload_uniform1i(<span class="stringliteral">&quot;environment&quot;</span>, 0);</div>
<div class="line"> </div>
<div class="line">    passthrough_shader.bind();</div>
<div class="line">    passthrough_shader.upload_uniform1i(<span class="stringliteral">&quot;scene&quot;</span>, 1);</div>
<div class="line"> </div>
<div class="line">    tonemap_shader.bind();</div>
<div class="line">    tonemap_shader.upload_uniform1i(<span class="stringliteral">&quot;scene&quot;</span>, 1);</div>
<div class="line">    tonemap_shader.upload_uniform1i(<span class="stringliteral">&quot;bloom&quot;</span>, 2);</div>
<div class="line"> </div>
<div class="line">    downsample_shader.bind();</div>
<div class="line">    downsample_shader.upload_uniform1i(<span class="stringliteral">&quot;scene&quot;</span>, 1);</div>
<div class="line"> </div>
<div class="line">    upsample_shader.bind();</div>
<div class="line">    upsample_shader.upload_uniform1i(<span class="stringliteral">&quot;scene&quot;</span>, 1);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// set up framebuffers and textures for HDR and bloom effect</span></div>
<div class="line">    std::array&lt;<a name="_a15"></a><a class="code" href="classstaplegl_1_1texture__2d.html">staplegl::texture_2d</a>, <a class="code" href="teapot_8cpp.html#ad226385a3534a996102879d543fe3ed7">calc_pyramid_levels</a>(<a class="code" href="teapot_8cpp.html#a059fb670617db97dde9d0247f91bb4f4">SCR_WIDTH</a>, <a class="code" href="teapot_8cpp.html#a852ed62ba9b4f83fc921ffcabcbcb743">SCR_HEIGHT</a>)&gt; pyramid_textures {};</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classstaplegl_1_1texture__2d.html">staplegl::texture_2d</a> <span class="keyword">const</span> msaa_color {</div>
<div class="line">        std::span&lt;const float&gt; {},</div>
<div class="line">        <a name="_a16"></a><a class="code" href="structstaplegl_1_1resolution.html">staplegl::resolution</a> { <a class="code" href="teapot_8cpp.html#a059fb670617db97dde9d0247f91bb4f4">SCR_WIDTH</a>, <a class="code" href="teapot_8cpp.html#a852ed62ba9b4f83fc921ffcabcbcb743">SCR_HEIGHT</a> },</div>
<div class="line">        <a name="_a17"></a><a class="code" href="structstaplegl_1_1texture__color.html">staplegl::texture_color</a> {</div>
<div class="line">            .<a name="a18"></a><a class="code" href="structstaplegl_1_1texture__color.html#a49a371a2e344051e8ac5a29e69492a3a">internal_format</a> = GL_RGBA16F, .format = GL_RGBA, .datatype = GL_FLOAT },</div>
<div class="line">        <a name="_a19"></a><a class="code" href="structstaplegl_1_1texture__filter.html">staplegl::texture_filter</a> {</div>
<div class="line">            .<a name="a20"></a><a class="code" href="structstaplegl_1_1texture__filter.html#af345a574229b060cd928cedd999818bd">min_filter</a> = GL_LINEAR, .mag_filter = GL_LINEAR, .clamping = GL_CLAMP_TO_EDGE },</div>
<div class="line">        <a class="code" href="teapot_8cpp.html#a7875464aa829a96fb3e7b7be4c1001ad">MSAA</a></div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classstaplegl_1_1texture__2d.html">staplegl::texture_2d</a> hdr_color {</div>
<div class="line">        std::span&lt;const float&gt; {},</div>
<div class="line">        <a class="code" href="structstaplegl_1_1resolution.html">staplegl::resolution</a> { <a class="code" href="teapot_8cpp.html#a059fb670617db97dde9d0247f91bb4f4">SCR_WIDTH</a>, <a class="code" href="teapot_8cpp.html#a852ed62ba9b4f83fc921ffcabcbcb743">SCR_HEIGHT</a> },</div>
<div class="line">        <a class="code" href="structstaplegl_1_1texture__color.html">staplegl::texture_color</a> {</div>
<div class="line">            .<a class="code" href="structstaplegl_1_1texture__color.html#a49a371a2e344051e8ac5a29e69492a3a">internal_format</a> = GL_RGBA16F, .format = GL_RGBA, .datatype = GL_FLOAT },</div>
<div class="line">        <a class="code" href="structstaplegl_1_1texture__filter.html">staplegl::texture_filter</a> {</div>
<div class="line">            .<a class="code" href="structstaplegl_1_1texture__filter.html#af345a574229b060cd928cedd999818bd">min_filter</a> = GL_LINEAR, .mag_filter = GL_LINEAR, .clamping = GL_CLAMP_TO_EDGE }</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// construct a texture pyramid, with each texture being half the size of the previous one.</span></div>
<div class="line">    <span class="comment">// iteratively downsampling from screen resolution towards the bottom will allow us to</span></div>
<div class="line">    <span class="comment">// spread the bloom effect over a wide area, with more details.</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; <span class="keyword">auto</span>&amp; tex : pyramid_textures) {</div>
<div class="line">        tex = <a class="code" href="classstaplegl_1_1texture__2d.html">staplegl::texture_2d</a> {</div>
<div class="line">            std::span&lt;const float&gt; {},</div>
<div class="line">            <a class="code" href="structstaplegl_1_1resolution.html">staplegl::resolution</a> { <a class="code" href="teapot_8cpp.html#a059fb670617db97dde9d0247f91bb4f4">SCR_WIDTH</a> &gt;&gt; i, <a class="code" href="teapot_8cpp.html#a852ed62ba9b4f83fc921ffcabcbcb743">SCR_HEIGHT</a> &gt;&gt; i },</div>
<div class="line">            <a class="code" href="structstaplegl_1_1texture__color.html">staplegl::texture_color</a> {</div>
<div class="line">                .<a class="code" href="structstaplegl_1_1texture__color.html#a49a371a2e344051e8ac5a29e69492a3a">internal_format</a> = GL_RGBA16F, .format = GL_RGBA, .datatype = GL_FLOAT },</div>
<div class="line">            <a class="code" href="structstaplegl_1_1texture__filter.html">staplegl::texture_filter</a> {</div>
<div class="line">                .<a class="code" href="structstaplegl_1_1texture__filter.html#af345a574229b060cd928cedd999818bd">min_filter</a> = GL_LINEAR, .mag_filter = GL_LINEAR, .clamping = GL_CLAMP_TO_EDGE }</div>
<div class="line">        };</div>
<div class="line">        i++;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="_a21"></a><a class="code" href="classstaplegl_1_1framebuffer.html">staplegl::framebuffer</a> msaa_fbo {};</div>
<div class="line">    <a class="code" href="classstaplegl_1_1framebuffer.html">staplegl::framebuffer</a> post_fbo {};</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// set up vertex data (and buffer(s)) and configure vertex attributes</span></div>
<div class="line">    <span class="comment">// ------------------------------------------------------------------</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Teapot model</span></div>
<div class="line">    <a name="_a22"></a><a class="code" href="classstaplegl_1_1vertex__buffer__layout.html">staplegl::vertex_buffer_layout</a> <span class="keyword">const</span> layout_3P_3N { { <a name="a23"></a><a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a97ade28e93c0de60adc075bdbe07ca36">u_type::vec3</a>, <span class="stringliteral">&quot;aPos&quot;</span> }, { <a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a97ade28e93c0de60adc075bdbe07ca36">u_type::vec3</a>, <span class="stringliteral">&quot;aNormal&quot;</span> } };</div>
<div class="line"> </div>
<div class="line">    <a name="_a24"></a><a class="code" href="classstaplegl_1_1vertex__buffer.html">staplegl::vertex_buffer</a> VBO { { teapot_vertices }, <span class="comment">// std::span extracts the size from the C array, preventing decay.</span></div>
<div class="line">        <a name="a25"></a><a class="code" href="namespacestaplegl.html#a30e6b644d9532677174c91cc822b2ea4abc84187eddb93b6cbc1a8cb47f0eb841">staplegl::driver_draw_hint::STATIC_DRAW</a> };</div>
<div class="line">    VBO.set_layout(layout_3P_3N);</div>
<div class="line"> </div>
<div class="line">    <a name="_a26"></a><a class="code" href="classstaplegl_1_1index__buffer.html">staplegl::index_buffer</a> EBO {</div>
<div class="line">        { teapot_indices } <span class="comment">// capture the array again.</span></div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <a name="_a27"></a><a class="code" href="classstaplegl_1_1vertex__array.html">staplegl::vertex_array</a> VAO;</div>
<div class="line"> </div>
<div class="line">    VAO.<a name="a28"></a><a class="code" href="classstaplegl_1_1vertex__array.html#ac440ffe41dbbc8cd52327bbd75144e56">add_vertex_buffer</a>(std::move(VBO));</div>
<div class="line">    VAO.<a name="a29"></a><a class="code" href="classstaplegl_1_1vertex__array.html#a4cdd47f4f78f155dbf03b88933bcd455">set_index_buffer</a>(std::move(EBO));</div>
<div class="line">    VAO.<a name="a30"></a><a class="code" href="classstaplegl_1_1vertex__array.html#a598420dc13c3932aa641e9d784fe4899">unbind</a>(); <span class="comment">// unbind to ensure that the VAO is not modified by accident.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Cube model used for the skybox</span></div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classstaplegl_1_1vertex__buffer__layout.html">staplegl::vertex_buffer_layout</a> <span class="keyword">const</span> layout_3P { { <a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a97ade28e93c0de60adc075bdbe07ca36">u_type::vec3</a>, <span class="stringliteral">&quot;aPos&quot;</span> } };</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classstaplegl_1_1vertex__buffer.html">staplegl::vertex_buffer</a> skybox_VBO { { skybox_vertices }, <span class="comment">// std::span extracts the size from the C array, preventing decay.</span></div>
<div class="line">        <a class="code" href="namespacestaplegl.html#a30e6b644d9532677174c91cc822b2ea4abc84187eddb93b6cbc1a8cb47f0eb841">staplegl::driver_draw_hint::STATIC_DRAW</a> };</div>
<div class="line">    skybox_VBO.set_layout(layout_3P); <span class="comment">// we reuse the same layout as the teapot.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// the skybox has no indices per se, we generate them on the fly.</span></div>
<div class="line">    std::vector&lt;unsigned int&gt; skybox_indices(SKYBOX_VERTS / 3);</div>
<div class="line">    std::generate(skybox_indices.begin(), skybox_indices.end(),</div>
<div class="line">        [n = 0]() <span class="keyword">mutable</span> { return n++; });</div>
<div class="line">    <a class="code" href="classstaplegl_1_1index__buffer.html">staplegl::index_buffer</a> skybox_EBO { skybox_indices };</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classstaplegl_1_1vertex__array.html">staplegl::vertex_array</a> skybox_VAO;</div>
<div class="line"> </div>
<div class="line">    skybox_VAO.<a class="code" href="classstaplegl_1_1vertex__array.html#ac440ffe41dbbc8cd52327bbd75144e56">add_vertex_buffer</a>(std::move(skybox_VBO));</div>
<div class="line">    skybox_VAO.<a class="code" href="classstaplegl_1_1vertex__array.html#a4cdd47f4f78f155dbf03b88933bcd455">set_index_buffer</a>(std::move(skybox_EBO));</div>
<div class="line">    skybox_VAO.<a class="code" href="classstaplegl_1_1vertex__array.html#a598420dc13c3932aa641e9d784fe4899">unbind</a>(); <span class="comment">// another unbind for good measure.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// declare a simple model matrix, to be modified in the render loop.</span></div>
<div class="line">    glm::mat4 <span class="keyword">const</span> model = glm::mat4(1.0F);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// screen quad for post-processing</span></div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classstaplegl_1_1vertex__buffer__layout.html">staplegl::vertex_buffer_layout</a> <span class="keyword">const</span> layout_3P_2UV { { <a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a97ade28e93c0de60adc075bdbe07ca36">u_type::vec3</a>, <span class="stringliteral">&quot;aPos&quot;</span> }, { <a name="a31"></a><a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a87c214e1e77f5e0644a224f3df50fae7">u_type::vec2</a>, <span class="stringliteral">&quot;aTexCoord&quot;</span> } };</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classstaplegl_1_1vertex__buffer.html">staplegl::vertex_buffer</a> quad_VBO { { quadVertices }, <span class="comment">// std::span extracts the size from the C array, preventing decay.</span></div>
<div class="line">        <a class="code" href="namespacestaplegl.html#a30e6b644d9532677174c91cc822b2ea4abc84187eddb93b6cbc1a8cb47f0eb841">staplegl::driver_draw_hint::STATIC_DRAW</a> };</div>
<div class="line"> </div>
<div class="line">    quad_VBO.set_layout(layout_3P_2UV);</div>
<div class="line">    <a class="code" href="classstaplegl_1_1vertex__array.html">staplegl::vertex_array</a> quad_VAO;</div>
<div class="line"> </div>
<div class="line">    quad_VAO.<a class="code" href="classstaplegl_1_1vertex__array.html#ac440ffe41dbbc8cd52327bbd75144e56">add_vertex_buffer</a>(std::move(quad_VBO));</div>
<div class="line">    quad_VAO.<a class="code" href="classstaplegl_1_1vertex__array.html#a598420dc13c3932aa641e9d784fe4899">unbind</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">        UNIFORMS:</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">        we have three uniform blocks, one holding the camera data and the various matrices,</span></div>
<div class="line"><span class="comment">        one holding the light data, and one holding the material data.</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    */</span></div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classstaplegl_1_1vertex__buffer__layout.html">staplegl::vertex_buffer_layout</a> <span class="keyword">const</span> camera_block_layout {</div>
<div class="line">        { <a name="a32"></a><a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063abe14b41eb96410ea28b32bc138d885ae">u_type::mat4</a>, <span class="stringliteral">&quot;projection&quot;</span> },</div>
<div class="line">        { <a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063abe14b41eb96410ea28b32bc138d885ae">u_type::mat4</a>, <span class="stringliteral">&quot;view&quot;</span> },</div>
<div class="line">        { <a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063abe14b41eb96410ea28b32bc138d885ae">u_type::mat4</a>, <span class="stringliteral">&quot;model&quot;</span> },</div>
<div class="line">        { <a name="a33"></a><a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a1a9028fd802c481a99491a418ca2fe86">u_type::vec4</a>, <span class="stringliteral">&quot;camera_pos&quot;</span> }</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <a name="_a34"></a><a class="code" href="classstaplegl_1_1uniform__buffer.html">staplegl::uniform_buffer</a> camera_block { camera_block_layout, 0 };</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classstaplegl_1_1vertex__buffer__layout.html">staplegl::vertex_buffer_layout</a> <span class="keyword">const</span> light_block_layout {</div>
<div class="line">        { <a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a1a9028fd802c481a99491a418ca2fe86">u_type::vec4</a>, <span class="stringliteral">&quot;light_pos&quot;</span> },</div>
<div class="line">        { <a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a1a9028fd802c481a99491a418ca2fe86">u_type::vec4</a>, <span class="stringliteral">&quot;light_color&quot;</span> },</div>
<div class="line">        { <a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a1a9028fd802c481a99491a418ca2fe86">u_type::vec4</a>, <span class="stringliteral">&quot;light_attenuation&quot;</span> }, <span class="comment">// 0 : constant, 1 : linear, 2 : quadratic, 3 : padding</span></div>
<div class="line">        { <a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a87c214e1e77f5e0644a224f3df50fae7">u_type::vec2</a>, <span class="stringliteral">&quot;light_intensities&quot;</span> } <span class="comment">// 0 : diffuse, 1 : specular</span></div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classstaplegl_1_1uniform__buffer.html">staplegl::uniform_buffer</a> light_block { light_block_layout, 1 };</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> glm::vec4 light_pos { 1.0F, 1.0F, 10.0F, 1.0F };</div>
<div class="line">    <span class="keyword">const</span> glm::vec4 light_color { 0.9333F, 0.5098, 0.9333F, 1.0F };</div>
<div class="line"> </div>
<div class="line">    light_block.<a name="a35"></a><a class="code" href="classstaplegl_1_1uniform__buffer.html#a52b4788b3c8cd94862c1416cb9b7155c">bind</a>();</div>
<div class="line">    light_block.set_attribute_data(std::span { glm::value_ptr(light_pos), 4 }, <span class="stringliteral">&quot;light_pos&quot;</span>);</div>
<div class="line">    light_block.set_attribute_data(std::span { glm::value_ptr(light_color), 4 }, <span class="stringliteral">&quot;light_color&quot;</span>);</div>
<div class="line">    light_block.set_attribute_data(std::span { glm::value_ptr(glm::vec4(1.0F, 0.22F, 0.20F, 0.0F)), 4 }, <span class="stringliteral">&quot;light_attenuation&quot;</span>);</div>
<div class="line">    light_block.set_attribute_data(std::span { glm::value_ptr(glm::vec2(<a class="code" href="teapot_8cpp.html#a488c00483fc02be1c9b617a0ff729c42">luminosity</a>, 1.2F)), 2 }, <span class="stringliteral">&quot;light_intensities&quot;</span>);</div>
<div class="line">    light_block.unbind();</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="classstaplegl_1_1vertex__buffer__layout.html">staplegl::vertex_buffer_layout</a> <span class="keyword">const</span> material_block_layout {</div>
<div class="line">        { <a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a1a9028fd802c481a99491a418ca2fe86">u_type::vec4</a>, <span class="stringliteral">&quot;material_color&quot;</span> },</div>
<div class="line">        { <a name="a36"></a><a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063ad33ec2b0bbea6d471a4706cea030e1e3">u_type::float32</a>, <span class="stringliteral">&quot;material_shininess&quot;</span> },</div>
<div class="line">        { <a class="code" href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063ad33ec2b0bbea6d471a4706cea030e1e3">u_type::float32</a>, <span class="stringliteral">&quot;material_roughness&quot;</span> }</div>
<div class="line">    };</div>
<div class="line">    <a class="code" href="classstaplegl_1_1uniform__buffer.html">staplegl::uniform_buffer</a> material_block { material_block_layout, 2 };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// teapot materials</span></div>
<div class="line">    <span class="keyword">const</span> glm::vec4 teapot_color { 0.51F, 0.55F, 0.66F, 1.0F };</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> teapot_shininess = 32.0F;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">float</span> teapot_roughness = 0.80F;</div>
<div class="line"> </div>
<div class="line">    material_block.<a class="code" href="classstaplegl_1_1uniform__buffer.html#a52b4788b3c8cd94862c1416cb9b7155c">bind</a>();</div>
<div class="line">    material_block.set_attribute_data(std::span { glm::value_ptr(teapot_color), 4 }, <span class="stringliteral">&quot;material_color&quot;</span>);</div>
<div class="line">    material_block.set_attribute_data(std::span { &amp;teapot_shininess, 1 }, <span class="stringliteral">&quot;material_shininess&quot;</span>);</div>
<div class="line">    material_block.set_attribute_data(std::span { &amp;teapot_roughness, 1 }, <span class="stringliteral">&quot;material_roughness&quot;</span>);</div>
<div class="line">    material_block.unbind();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// load up cubemap texture</span></div>
<div class="line">    <span class="comment">// goes in order: right, left, top, bottom, front, back</span></div>
<div class="line">    std::array&lt;std::string, 6&gt; <span class="keyword">const</span> faces {</div>
<div class="line">        <span class="stringliteral">&quot;./assets/skybox/right.jpg&quot;</span>, <span class="stringliteral">&quot;./assets/skybox/left.jpg&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;./assets/skybox/top.jpg&quot;</span>, <span class="stringliteral">&quot;./assets/skybox/bottom.jpg&quot;</span>,</div>
<div class="line">        <span class="stringliteral">&quot;./assets/skybox/front.jpg&quot;</span>, <span class="stringliteral">&quot;./assets/skybox/back.jpg&quot;</span></div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// prep for data transfer</span></div>
<div class="line">    std::array&lt;std::span&lt;std::byte&gt;, 6&gt; cube_data;</div>
<div class="line"> </div>
<div class="line">    std::int32_t width = 0, height = 0, nrChannels = 0;</div>
<div class="line">    <span class="keywordtype">int</span> i = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; face : faces) {</div>
<div class="line">        <span class="keyword">auto</span>* data = <span class="keyword">reinterpret_cast&lt;</span>std::byte*<span class="keyword">&gt;</span>( <span class="comment">// NOLINT</span></div>
<div class="line">            stbi_load(face.c_str(), &amp;width, &amp;height, &amp;nrChannels, 0));</div>
<div class="line">        <span class="keywordflow">if</span> (data == <span class="keyword">nullptr</span>) {</div>
<div class="line">            std::cout &lt;&lt; <span class="stringliteral">&quot;Failed to load texture&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// pack data in array</span></div>
<div class="line">        cube_data[i++] = std::span&lt;std::byte&gt; { data, <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(width * height * nrChannels) };</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// create the cubemap texture</span></div>
<div class="line">    <span class="comment">// srgb8 is used to ensure that the texture is correctly gamma corrected.</span></div>
<div class="line">    <a name="_a37"></a><a class="code" href="classstaplegl_1_1cubemap.html">staplegl::cubemap</a> <span class="keyword">const</span> skybox {</div>
<div class="line">        cube_data, { width, height },</div>
<div class="line">        { .internal_format = GL_SRGB8, .format = GL_RGB, .datatype = GL_UNSIGNED_BYTE },</div>
<div class="line">        { .min_filter = GL_LINEAR, .mag_filter = GL_LINEAR, .clamping = GL_CLAMP_TO_EDGE },</div>
<div class="line">        <span class="keyword">true</span></div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; face : cube_data) {</div>
<div class="line">        stbi_image_free(face.data());</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// set the texture to unit 0, so that the shader can find it.</span></div>
<div class="line">    skybox.set_unit(0);</div>
<div class="line"> </div>
<div class="line">    glClearColor(0.F, 0.F, 0.F, 1.0F);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (glfwWindowShouldClose(window) == 0) {</div>
<div class="line">        <span class="comment">// input</span></div>
<div class="line">        <span class="comment">// -----</span></div>
<div class="line">        <a class="code" href="teapot_8cpp.html#a2d03c6f2666863543429a06ef642fe6a">processInput</a>(window);</div>
<div class="line"> </div>
<div class="line">        light_block.bind();</div>
<div class="line">        light_block.set_attribute_data(std::span { glm::value_ptr(glm::vec2(<a class="code" href="teapot_8cpp.html#a488c00483fc02be1c9b617a0ff729c42">luminosity</a>, 1.2F)), 2 }, <span class="stringliteral">&quot;light_intensities&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Rotate the camera around the teapot.</span></div>
<div class="line">        <span class="keyword">const</span> <span class="keyword">auto</span> time = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(glfwGetTime());</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> radius = 4.0F;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> slow_factor = 0.25F;</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> camX = sin(time * slow_factor) * radius;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> camZ = cos(time * slow_factor) * radius;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">float</span> camY = sin(time * slow_factor) + 0.5F; <span class="comment">// slightly over the teapot.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// gen camera vector and make it look at the teapot (center of the screen).</span></div>
<div class="line">        glm::vec4 camera_pos { camX, camY, camZ, 1.0F };</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// gen the view and projection matrices.</span></div>
<div class="line">        glm::mat4 view = glm::lookAt(glm::vec3(camera_pos), glm::vec3(0.0F, 0.0F, 0.0F),</div>
<div class="line">            glm::vec3(0.0F, 1.0F, 0.0F));</div>
<div class="line">        glm::mat4 projection = glm::perspective(glm::radians(90.0F), <a class="code" href="teapot_8cpp.html#a5584bdb427edfe29e0c0c3753b619161">aspect_ratio</a>, 0.01F, 100.0F);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// send the data to the GPU through the uniform block.</span></div>
<div class="line">        camera_block.bind();</div>
<div class="line">        camera_block.set_attribute_data(</div>
<div class="line">            std::span { glm::value_ptr(camera_pos), 4 }, <span class="stringliteral">&quot;camera_pos&quot;</span>);</div>
<div class="line">        camera_block.set_attribute_data(std::span { glm::value_ptr(view), 16 }, <span class="stringliteral">&quot;view&quot;</span>);</div>
<div class="line">        camera_block.set_attribute_data(std::span { glm::value_ptr(projection), 16 }, <span class="stringliteral">&quot;projection&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// first off, we bind the framebuffer and start drawing to our HDR texture.</span></div>
<div class="line">        msaa_fbo.bind();</div>
<div class="line">        msaa_fbo.set_texture(msaa_color);</div>
<div class="line">        msaa_fbo.set_renderbuffer(</div>
<div class="line">            { <a class="code" href="teapot_8cpp.html#a059fb670617db97dde9d0247f91bb4f4">SCR_WIDTH</a>,</div>
<div class="line">                <a class="code" href="teapot_8cpp.html#a852ed62ba9b4f83fc921ffcabcbcb743">SCR_HEIGHT</a> }, <span class="comment">// get a renderbuffer of the same size as the screen.</span></div>
<div class="line">            <a name="a38"></a><a class="code" href="namespacestaplegl.html#a4bde1690fcce67d4e6c23aa812bd497eac8b6d545f4265e678a88ab4119a12ee1">staplegl::fbo_attachment::ATTACH_DEPTH_STENCIL_BUFFER</a>,</div>
<div class="line">            <a class="code" href="teapot_8cpp.html#a7875464aa829a96fb3e7b7be4c1001ad">MSAA</a>); <span class="comment">// set the same samples as the color texture.</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!msaa_fbo.assert_completeness()) [[unlikely]] {</div>
<div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;Framebuffer not complete, line: &quot;</span> &lt;&lt; __LINE__ &lt;&lt; std::endl;</div>
<div class="line">            <span class="keywordflow">return</span> EXIT_FAILURE; <span class="comment">// check for completeness</span></div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); <span class="comment">// clear the framebuffer</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">            Rendering with MSAA</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">        */</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// prep to render the skybox</span></div>
<div class="line">        skybox_VAO.<a name="a39"></a><a class="code" href="classstaplegl_1_1vertex__array.html#a4491c6a6f1dc174c2caa320c21042c2a">bind</a>();</div>
<div class="line">        skybox_shader.bind();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// make the skybox huge and centered on the camera.</span></div>
<div class="line">        <span class="comment">// in a more complex scene you would have it follow the camera.</span></div>
<div class="line">        glm::mat4 skybox_mat = glm::scale(glm::mat4(1.0F), glm::vec3(50.0F, 50.0F, 50.0F));</div>
<div class="line">        camera_block.set_attribute_data(std::span { glm::value_ptr(skybox_mat), 16 }, <span class="stringliteral">&quot;model&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// disable depth writing so that the skybox is always drawn behind everything else.</span></div>
<div class="line">        <span class="comment">// we do not need to invert culling due to the skybox&#39;s indices being wound in the opposite direction.</span></div>
<div class="line">        glDepthMask(GL_FALSE);</div>
<div class="line">        glDrawElements(GL_TRIANGLES, skybox_VAO.<a name="a40"></a><a class="code" href="classstaplegl_1_1vertex__array.html#ab9e97d22907c5d8a100d35eeeb94df4a">index_data</a>().count(), GL_UNSIGNED_INT, <span class="keyword">nullptr</span>);</div>
<div class="line">        glDepthMask(GL_TRUE);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// draw the blue light source</span></div>
<div class="line">        <span class="comment">// we use the same VAO as the skybox, but we change the shader and the model matrix.</span></div>
<div class="line"> </div>
<div class="line">        glm::mat4 light_mat = glm::translate(glm::mat4(1.0F), glm::vec3(light_pos));</div>
<div class="line">        camera_block.set_attribute_data(std::span { glm::value_ptr(light_mat), 16 }, <span class="stringliteral">&quot;model&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        light_shader.bind();</div>
<div class="line">        <span class="comment">// since the skybox has an inverted winding order, we need to invert culling</span></div>
<div class="line">        <span class="comment">// (we want to see the cube from outside now), so the effect is not cancelled out.</span></div>
<div class="line">        glFrontFace(GL_CW);</div>
<div class="line">        glDrawElements(GL_TRIANGLES, skybox_VAO.<a class="code" href="classstaplegl_1_1vertex__array.html#ab9e97d22907c5d8a100d35eeeb94df4a">index_data</a>().count(), GL_UNSIGNED_INT, <span class="keyword">nullptr</span>);</div>
<div class="line">        glFrontFace(GL_CCW); <span class="comment">// on a real program, use better models :)</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// draw the teapot</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// The teapot model matrix flips it upside-down, so that it is rendered correctly.</span></div>
<div class="line">        glm::mat4 model_mat = glm::scale(model, glm::vec3(1.0F, -1.0F, 1.0F));</div>
<div class="line">        camera_block.set_attribute_data(std::span { glm::value_ptr(model_mat), 16 }, <span class="stringliteral">&quot;model&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        VAO.<a class="code" href="classstaplegl_1_1vertex__array.html#a4491c6a6f1dc174c2caa320c21042c2a">bind</a>();</div>
<div class="line">        teapot_shader.bind();</div>
<div class="line"> </div>
<div class="line">        glDrawElements(GL_TRIANGLES, VAO.<a class="code" href="classstaplegl_1_1vertex__array.html#ab9e97d22907c5d8a100d35eeeb94df4a">index_data</a>().count(), GL_UNSIGNED_INT, <span class="keyword">nullptr</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">            Resolve MSAA to HDR framebuffer</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">        */</span></div>
<div class="line"> </div>
<div class="line">        post_fbo.bind();</div>
<div class="line">        post_fbo.set_texture(hdr_color);</div>
<div class="line"> </div>
<div class="line">        <a name="a41"></a><a class="code" href="classstaplegl_1_1framebuffer.html#ab4f23d19202163757171b1c932f91bec">staplegl::framebuffer::transfer_data</a>(msaa_fbo, post_fbo, { <a class="code" href="teapot_8cpp.html#a059fb670617db97dde9d0247f91bb4f4">SCR_WIDTH</a>, <a class="code" href="teapot_8cpp.html#a852ed62ba9b4f83fc921ffcabcbcb743">SCR_HEIGHT</a> });</div>
<div class="line"> </div>
<div class="line">        post_fbo.bind();</div>
<div class="line">        post_fbo.set_renderbuffer({ 0, 0 }, <a name="a42"></a><a class="code" href="namespacestaplegl.html#a4bde1690fcce67d4e6c23aa812bd497eab50339a10e1de285ac99d4c3990b8693">staplegl::fbo_attachment::NONE</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/*</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">            Post-processing</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">        */</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// bind screen-quad, every draw call will now simply</span></div>
<div class="line">        <span class="comment">// transfer content from one texture to another.</span></div>
<div class="line"> </div>
<div class="line">        quad_VAO.<a class="code" href="classstaplegl_1_1vertex__array.html#a4491c6a6f1dc174c2caa320c21042c2a">bind</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// copy stuff to the bloom pyramid</span></div>
<div class="line">        passthrough_shader.bind();</div>
<div class="line">        hdr_color.set_unit(1);</div>
<div class="line">        post_fbo.set_texture(pyramid_textures[0], 0);</div>
<div class="line"> </div>
<div class="line">        glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); <span class="comment">// copy the scene to the lowest level of the pyramid</span></div>
<div class="line"> </div>
<div class="line">        downsample_shader.bind();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// work our way down the levels of the pyramid, downsampling the texture each time.</span></div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; pyramid_textures.size() - 1; i++) {</div>
<div class="line">            <span class="comment">// downsample from texture i to texture i + 1</span></div>
<div class="line"> </div>
<div class="line">            <span class="keyword">auto</span>&amp; draw_source = pyramid_textures[i];</div>
<div class="line">            <span class="keyword">auto</span>&amp; draw_target = pyramid_textures[i + 1];</div>
<div class="line">            <span class="keyword">auto</span> <span class="keyword">const</span>&amp; t_res = draw_target.get_resolution();</div>
<div class="line"> </div>
<div class="line">            draw_source.set_unit(1);</div>
<div class="line"> </div>
<div class="line">            post_fbo.set_texture(draw_target, 0);</div>
<div class="line">            post_fbo.set_viewport(</div>
<div class="line">                { t_res.width,</div>
<div class="line">                    t_res.height });</div>
<div class="line"> </div>
<div class="line">            downsample_shader.upload_uniform2f(</div>
<div class="line">                <span class="stringliteral">&quot;uResolution&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(t_res.width),</div>
<div class="line">                <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(t_res.height));</div>
<div class="line"> </div>
<div class="line">            glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// now every level of the pyramid is filled with a downsampled version of the scene.</span></div>
<div class="line">        <span class="comment">// we can now upsample the pyramid and add the results together to get the bloom effect.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// blending for Bloom</span></div>
<div class="line">        glEnable(GL_BLEND);</div>
<div class="line">        glBlendFunc(GL_ONE, GL_ONE);</div>
<div class="line">        glBlendEquation(GL_FUNC_ADD);</div>
<div class="line"> </div>
<div class="line">        upsample_shader.bind();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = pyramid_textures.size() - 1; i &gt; 0; i--) {</div>
<div class="line">            <span class="comment">// upsample from texture i to texture i - 1</span></div>
<div class="line"> </div>
<div class="line">            <span class="keyword">auto</span>&amp; draw_source = pyramid_textures[i];</div>
<div class="line">            <span class="keyword">auto</span>&amp; draw_target = pyramid_textures[i - 1];</div>
<div class="line"> </div>
<div class="line">            draw_source.set_unit(1);</div>
<div class="line"> </div>
<div class="line">            post_fbo.set_texture(draw_target, 0);</div>
<div class="line">            post_fbo.set_viewport(</div>
<div class="line">                { draw_target.get_resolution().width,</div>
<div class="line">                    draw_target.get_resolution().height });</div>
<div class="line">            glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);</div>
<div class="line">        }</div>
<div class="line">        glDisable(GL_BLEND);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// After upscaling the pyramid, we have the bloom effect in the lowest level of the pyramid.</span></div>
<div class="line">        <span class="comment">// we can combine it with the original scene to get the final result.</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// HDR post-processing</span></div>
<div class="line">        <a name="a43"></a><a class="code" href="classstaplegl_1_1framebuffer.html#a1d26858de0ad49a0ac2cfd504eae76fd">staplegl::framebuffer::bind_default</a>();</div>
<div class="line">        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</div>
<div class="line"> </div>
<div class="line">        tonemap_shader.bind();</div>
<div class="line">        <span class="comment">// bind the pyramid texture and the original scene</span></div>
<div class="line">        hdr_color.set_unit(1);</div>
<div class="line">        pyramid_textures[0].set_unit(2);</div>
<div class="line"> </div>
<div class="line">        glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);</div>
<div class="line"> </div>
<div class="line">        glfwSwapBuffers(window);</div>
<div class="line">        glfwPollEvents();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// no need to de-allocate anything as staplegl handles all the OpenGL objects in a RAII fashion.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// glfw: terminate, clearing all previously allocated GLFW resources.</span></div>
<div class="line">    <span class="comment">// ------------------------------------------------------------------</span></div>
<div class="line">    glfwTerminate();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// process all input: query GLFW whether relevant keys are pressed/released this</span></div>
<div class="line"><span class="comment">// frame and react accordingly</span></div>
<div class="line"><span class="comment">// ---------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="teapot_8cpp.html#a2d03c6f2666863543429a06ef642fe6a">processInput</a>(GLFWwindow* window)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS) {</div>
<div class="line">        glfwSetWindowShouldClose(window, 1);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (glfwGetKey(window, GLFW_KEY_U) == GLFW_PRESS) {</div>
<div class="line">        <a class="code" href="teapot_8cpp.html#a488c00483fc02be1c9b617a0ff729c42">luminosity</a> += 0.5F;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (glfwGetKey(window, GLFW_KEY_D) == GLFW_PRESS) {</div>
<div class="line">        <a class="code" href="teapot_8cpp.html#a488c00483fc02be1c9b617a0ff729c42">luminosity</a> = std::max(0.0F, <a class="code" href="teapot_8cpp.html#a488c00483fc02be1c9b617a0ff729c42">luminosity</a> - 0.5F);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (glfwGetKey(window, GLFW_KEY_X) == GLFW_PRESS) {</div>
<div class="line">        <span class="comment">// toggle mesh wireframe</span></div>
<div class="line">        <span class="keyword">static</span> <span class="keywordtype">bool</span> wireframe = <span class="keyword">false</span>;</div>
<div class="line">        wireframe = !wireframe;</div>
<div class="line">        glPolygonMode(GL_FRONT_AND_BACK, wireframe ? GL_LINE : GL_FILL);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// glfw: whenever the window size changed (by OS or user resize) this callback</span></div>
<div class="line"><span class="comment">// function executes</span></div>
<div class="line"><span class="comment">// ---------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="teapot_8cpp.html#a5180f7bf2b71421af837035824a8c8ac">framebuffer_size_callback</a>(GLFWwindow* <span class="comment">/*window*/</span>, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// make sure the viewport matches the new window dimensions; note that width</span></div>
<div class="line">    <span class="comment">// and height will be significantly larger than specified on retina displays.</span></div>
<div class="line">    glViewport(0, 0, width, height);</div>
<div class="line">    <a class="code" href="teapot_8cpp.html#a5584bdb427edfe29e0c0c3753b619161">aspect_ratio</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(width) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(height);</div>
<div class="line">}</div>
<div class="ttc" id="aclassstaplegl_1_1cubemap_html"><div class="ttname"><a href="classstaplegl_1_1cubemap.html">staplegl::cubemap</a></div><div class="ttdoc">Cube map texture wrapper.</div><div class="ttdef"><b>Definition:</b> <a href="cubemap_8hpp_source.html#l00033">cubemap.hpp:33</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1framebuffer_html"><div class="ttname"><a href="classstaplegl_1_1framebuffer.html">staplegl::framebuffer</a></div><div class="ttdoc">Framebuffer Object (FBO) wrapper.</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8hpp_source.html#l00051">framebuffer.hpp:51</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1framebuffer_html_a1d26858de0ad49a0ac2cfd504eae76fd"><div class="ttname"><a href="classstaplegl_1_1framebuffer.html#a1d26858de0ad49a0ac2cfd504eae76fd">staplegl::framebuffer::bind_default</a></div><div class="ttdeci">static void bind_default()</div><div class="ttdoc">Bind the default framebuffer.</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8hpp_source.html#l00107">framebuffer.hpp:107</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1framebuffer_html_ab4f23d19202163757171b1c932f91bec"><div class="ttname"><a href="classstaplegl_1_1framebuffer.html#ab4f23d19202163757171b1c932f91bec">staplegl::framebuffer::transfer_data</a></div><div class="ttdeci">static void transfer_data(framebuffer const &amp;src, framebuffer const &amp;dst, resolution res)</div><div class="ttdoc">Transfer the contents of a framebuffer to another.</div><div class="ttdef"><b>Definition:</b> <a href="framebuffer_8hpp_source.html#l00143">framebuffer.hpp:143</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1index__buffer_html"><div class="ttname"><a href="classstaplegl_1_1index__buffer.html">staplegl::index_buffer</a></div><div class="ttdoc">Element Buffer Object (EBO) wrapper.</div><div class="ttdef"><b>Definition:</b> <a href="index__buffer_8hpp_source.html#l00044">index_buffer.hpp:44</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1shader__program_html"><div class="ttname"><a href="classstaplegl_1_1shader__program.html">staplegl::shader_program</a></div><div class="ttdoc">Shader program class.</div><div class="ttdef"><b>Definition:</b> <a href="shader_8hpp_source.html#l00077">shader.hpp:77</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1shader__program_html_a3fd31dc04f01b13cc0caeb7cb8f99148"><div class="ttname"><a href="classstaplegl_1_1shader__program.html#a3fd31dc04f01b13cc0caeb7cb8f99148">staplegl::shader_program::bind</a></div><div class="ttdeci">void bind() const</div><div class="ttdoc">Bind the shader program.</div><div class="ttdef"><b>Definition:</b> <a href="shader_8hpp_source.html#l00361">shader.hpp:361</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1texture__2d_html"><div class="ttname"><a href="classstaplegl_1_1texture__2d.html">staplegl::texture_2d</a></div><div class="ttdoc">2D texture wrapper.</div><div class="ttdef"><b>Definition:</b> <a href="texture_8hpp_source.html#l00096">texture.hpp:96</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1uniform__buffer_html"><div class="ttname"><a href="classstaplegl_1_1uniform__buffer.html">staplegl::uniform_buffer</a></div><div class="ttdoc">Uniform Buffer Object (UBO) wrapper.</div><div class="ttdef"><b>Definition:</b> <a href="uniform__buffer_8hpp_source.html#l00033">uniform_buffer.hpp:33</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1uniform__buffer_html_a52b4788b3c8cd94862c1416cb9b7155c"><div class="ttname"><a href="classstaplegl_1_1uniform__buffer.html#a52b4788b3c8cd94862c1416cb9b7155c">staplegl::uniform_buffer::bind</a></div><div class="ttdeci">void bind() const</div><div class="ttdoc">Bind the uniform to the OpenGL context.</div><div class="ttdef"><b>Definition:</b> <a href="uniform__buffer_8hpp_source.html#l00195">uniform_buffer.hpp:195</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1vertex__array_html"><div class="ttname"><a href="classstaplegl_1_1vertex__array.html">staplegl::vertex_array</a></div><div class="ttdoc">Vertex Array Object (VAO) wrapper.</div><div class="ttdef"><b>Definition:</b> <a href="vertex__array_8hpp_source.html#l00051">vertex_array.hpp:51</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1vertex__array_html_a4491c6a6f1dc174c2caa320c21042c2a"><div class="ttname"><a href="classstaplegl_1_1vertex__array.html#a4491c6a6f1dc174c2caa320c21042c2a">staplegl::vertex_array::bind</a></div><div class="ttdeci">void bind() const</div><div class="ttdoc">Bind the vertex array object.</div><div class="ttdef"><b>Definition:</b> <a href="vertex__array_8hpp_source.html#l00213">vertex_array.hpp:213</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1vertex__array_html_a4cdd47f4f78f155dbf03b88933bcd455"><div class="ttname"><a href="classstaplegl_1_1vertex__array.html#a4cdd47f4f78f155dbf03b88933bcd455">staplegl::vertex_array::set_index_buffer</a></div><div class="ttdeci">void set_index_buffer(index_buffer &amp;&amp;ibo)</div><div class="ttdoc">Set the index buffer object.</div><div class="ttdef"><b>Definition:</b> <a href="vertex__array_8hpp_source.html#l00267">vertex_array.hpp:267</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1vertex__array_html_a598420dc13c3932aa641e9d784fe4899"><div class="ttname"><a href="classstaplegl_1_1vertex__array.html#a598420dc13c3932aa641e9d784fe4899">staplegl::vertex_array::unbind</a></div><div class="ttdeci">static void unbind()</div><div class="ttdoc">Unbind the vertex array object.</div><div class="ttdef"><b>Definition:</b> <a href="vertex__array_8hpp_source.html#l00218">vertex_array.hpp:218</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1vertex__array_html_ab9e97d22907c5d8a100d35eeeb94df4a"><div class="ttname"><a href="classstaplegl_1_1vertex__array.html#ab9e97d22907c5d8a100d35eeeb94df4a">staplegl::vertex_array::index_data</a></div><div class="ttdeci">constexpr auto index_data() -&gt; index_buffer &amp;</div><div class="ttdoc">Get the index buffer object.</div><div class="ttdef"><b>Definition:</b> <a href="vertex__array_8hpp_source.html#l00186">vertex_array.hpp:186</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1vertex__array_html_ac440ffe41dbbc8cd52327bbd75144e56"><div class="ttname"><a href="classstaplegl_1_1vertex__array.html#ac440ffe41dbbc8cd52327bbd75144e56">staplegl::vertex_array::add_vertex_buffer</a></div><div class="ttdeci">auto add_vertex_buffer(vertex_buffer &amp;&amp;vbo) -&gt; vertex_array::iterator_t</div><div class="ttdoc">Add a vertex buffer to the vertex array object.</div><div class="ttdef"><b>Definition:</b> <a href="vertex__array_8hpp_source.html#l00223">vertex_array.hpp:223</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1vertex__buffer__layout_html"><div class="ttname"><a href="classstaplegl_1_1vertex__buffer__layout.html">staplegl::vertex_buffer_layout</a></div><div class="ttdoc">Vertex buffer layout.</div><div class="ttdef"><b>Definition:</b> <a href="vertex__buffer__layout_8hpp_source.html#l00079">vertex_buffer_layout.hpp:79</a></div></div>
<div class="ttc" id="aclassstaplegl_1_1vertex__buffer_html"><div class="ttname"><a href="classstaplegl_1_1vertex__buffer.html">staplegl::vertex_buffer</a></div><div class="ttdoc">Vertex Buffer Object (VBO) wrapper.</div><div class="ttdef"><b>Definition:</b> <a href="vertex__buffer_8hpp_source.html#l00079">vertex_buffer.hpp:79</a></div></div>
<div class="ttc" id="anamespacestaplegl_1_1shader__data__type_html"><div class="ttname"><a href="namespacestaplegl_1_1shader__data__type.html">staplegl::shader_data_type</a></div><div class="ttdef"><b>Definition:</b> <a href="shader__data__type_8hpp_source.html#l00029">shader_data_type.hpp:29</a></div></div>
<div class="ttc" id="anamespacestaplegl_1_1shader__data__type_html_a648892e19289265a11b3b26743c02063a1a9028fd802c481a99491a418ca2fe86"><div class="ttname"><a href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a1a9028fd802c481a99491a418ca2fe86">staplegl::shader_data_type::u_type::vec4</a></div><div class="ttdeci">@ vec4</div></div>
<div class="ttc" id="anamespacestaplegl_1_1shader__data__type_html_a648892e19289265a11b3b26743c02063a87c214e1e77f5e0644a224f3df50fae7"><div class="ttname"><a href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a87c214e1e77f5e0644a224f3df50fae7">staplegl::shader_data_type::u_type::vec2</a></div><div class="ttdeci">@ vec2</div></div>
<div class="ttc" id="anamespacestaplegl_1_1shader__data__type_html_a648892e19289265a11b3b26743c02063a97ade28e93c0de60adc075bdbe07ca36"><div class="ttname"><a href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063a97ade28e93c0de60adc075bdbe07ca36">staplegl::shader_data_type::u_type::vec3</a></div><div class="ttdeci">@ vec3</div></div>
<div class="ttc" id="anamespacestaplegl_1_1shader__data__type_html_a648892e19289265a11b3b26743c02063abe14b41eb96410ea28b32bc138d885ae"><div class="ttname"><a href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063abe14b41eb96410ea28b32bc138d885ae">staplegl::shader_data_type::u_type::mat4</a></div><div class="ttdeci">@ mat4</div></div>
<div class="ttc" id="anamespacestaplegl_1_1shader__data__type_html_a648892e19289265a11b3b26743c02063ad33ec2b0bbea6d471a4706cea030e1e3"><div class="ttname"><a href="namespacestaplegl_1_1shader__data__type.html#a648892e19289265a11b3b26743c02063ad33ec2b0bbea6d471a4706cea030e1e3">staplegl::shader_data_type::u_type::float32</a></div><div class="ttdeci">@ float32</div></div>
<div class="ttc" id="anamespacestaplegl_html_a2d27f6fa7483d510588e9a271a4229dea79306d33e026d8bea20528d1cd94e157"><div class="ttname"><a href="namespacestaplegl.html#a2d27f6fa7483d510588e9a271a4229dea79306d33e026d8bea20528d1cd94e157">staplegl::MSAA_X8</a></div><div class="ttdeci">@ MSAA_X8</div><div class="ttdef"><b>Definition:</b> <a href="utility_8hpp_source.html#l00042">utility.hpp:42</a></div></div>
<div class="ttc" id="anamespacestaplegl_html_a2d27f6fa7483d510588e9a271a4229dea96d5466956a3db605430cdde90cc4c80"><div class="ttname"><a href="namespacestaplegl.html#a2d27f6fa7483d510588e9a271a4229dea96d5466956a3db605430cdde90cc4c80">staplegl::MSAA_X1</a></div><div class="ttdeci">@ MSAA_X1</div><div class="ttdef"><b>Definition:</b> <a href="utility_8hpp_source.html#l00039">utility.hpp:39</a></div></div>
<div class="ttc" id="anamespacestaplegl_html_a30e6b644d9532677174c91cc822b2ea4abc84187eddb93b6cbc1a8cb47f0eb841"><div class="ttname"><a href="namespacestaplegl.html#a30e6b644d9532677174c91cc822b2ea4abc84187eddb93b6cbc1a8cb47f0eb841">staplegl::STATIC_DRAW</a></div><div class="ttdeci">@ STATIC_DRAW</div><div class="ttdef"><b>Definition:</b> <a href="vertex__buffer_8hpp_source.html#l00052">vertex_buffer.hpp:52</a></div></div>
<div class="ttc" id="anamespacestaplegl_html_a4bde1690fcce67d4e6c23aa812bd497eab50339a10e1de285ac99d4c3990b8693"><div class="ttname"><a href="namespacestaplegl.html#a4bde1690fcce67d4e6c23aa812bd497eab50339a10e1de285ac99d4c3990b8693">staplegl::fbo_attachment::NONE</a></div><div class="ttdeci">@ NONE</div></div>
<div class="ttc" id="anamespacestaplegl_html_a4bde1690fcce67d4e6c23aa812bd497eac8b6d545f4265e678a88ab4119a12ee1"><div class="ttname"><a href="namespacestaplegl.html#a4bde1690fcce67d4e6c23aa812bd497eac8b6d545f4265e678a88ab4119a12ee1">staplegl::fbo_attachment::ATTACH_DEPTH_STENCIL_BUFFER</a></div><div class="ttdeci">@ ATTACH_DEPTH_STENCIL_BUFFER</div></div>
<div class="ttc" id="astaplegl_8hpp_html"><div class="ttname"><a href="staplegl_8hpp.html">staplegl.hpp</a></div><div class="ttdoc">StapleGL, a C++20 wrapper for OpenGL.</div></div>
<div class="ttc" id="astructstaplegl_1_1resolution_html"><div class="ttname"><a href="structstaplegl_1_1resolution.html">staplegl::resolution</a></div><div class="ttdoc">A struct that represents an image's dimensions.</div><div class="ttdef"><b>Definition:</b> <a href="utility_8hpp_source.html#l00028">utility.hpp:28</a></div></div>
<div class="ttc" id="astructstaplegl_1_1texture__color_html"><div class="ttname"><a href="structstaplegl_1_1texture__color.html">staplegl::texture_color</a></div><div class="ttdoc">OpenGL texture details relating to the color format and data type.</div><div class="ttdef"><b>Definition:</b> <a href="texture_8hpp_source.html#l00038">texture.hpp:38</a></div></div>
<div class="ttc" id="astructstaplegl_1_1texture__color_html_a49a371a2e344051e8ac5a29e69492a3a"><div class="ttname"><a href="structstaplegl_1_1texture__color.html#a49a371a2e344051e8ac5a29e69492a3a">staplegl::texture_color::internal_format</a></div><div class="ttdeci">std::int32_t internal_format</div><div class="ttdef"><b>Definition:</b> <a href="texture_8hpp_source.html#l00039">texture.hpp:39</a></div></div>
<div class="ttc" id="astructstaplegl_1_1texture__filter_html"><div class="ttname"><a href="structstaplegl_1_1texture__filter.html">staplegl::texture_filter</a></div><div class="ttdoc">OpenGL texture details relating to filtering and clamping of the image.</div><div class="ttdef"><b>Definition:</b> <a href="texture_8hpp_source.html#l00048">texture.hpp:48</a></div></div>
<div class="ttc" id="astructstaplegl_1_1texture__filter_html_af345a574229b060cd928cedd999818bd"><div class="ttname"><a href="structstaplegl_1_1texture__filter.html#af345a574229b060cd928cedd999818bd">staplegl::texture_filter::min_filter</a></div><div class="ttdeci">std::int32_t min_filter</div><div class="ttdef"><b>Definition:</b> <a href="texture_8hpp_source.html#l00049">texture.hpp:49</a></div></div>
<div class="ttc" id="ateapot_8cpp_html_a059fb670617db97dde9d0247f91bb4f4"><div class="ttname"><a href="teapot_8cpp.html#a059fb670617db97dde9d0247f91bb4f4">SCR_WIDTH</a></div><div class="ttdeci">const int32_t SCR_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="teapot_8cpp_source.html#l00059">teapot.cpp:59</a></div></div>
<div class="ttc" id="ateapot_8cpp_html_a2d03c6f2666863543429a06ef642fe6a"><div class="ttname"><a href="teapot_8cpp.html#a2d03c6f2666863543429a06ef642fe6a">processInput</a></div><div class="ttdeci">void processInput(GLFWwindow *window)</div><div class="ttdef"><b>Definition:</b> <a href="teapot_8cpp_source.html#l00592">teapot.cpp:592</a></div></div>
<div class="ttc" id="ateapot_8cpp_html_a488c00483fc02be1c9b617a0ff729c42"><div class="ttname"><a href="teapot_8cpp.html#a488c00483fc02be1c9b617a0ff729c42">luminosity</a></div><div class="ttdeci">float luminosity</div><div class="ttdef"><b>Definition:</b> <a href="teapot_8cpp_source.html#l00063">teapot.cpp:63</a></div></div>
<div class="ttc" id="ateapot_8cpp_html_a5180f7bf2b71421af837035824a8c8ac"><div class="ttname"><a href="teapot_8cpp.html#a5180f7bf2b71421af837035824a8c8ac">framebuffer_size_callback</a></div><div class="ttdeci">void framebuffer_size_callback(GLFWwindow *window, int width, int height)</div><div class="ttdef"><b>Definition:</b> <a href="teapot_8cpp_source.html#l00614">teapot.cpp:614</a></div></div>
<div class="ttc" id="ateapot_8cpp_html_a5584bdb427edfe29e0c0c3753b619161"><div class="ttname"><a href="teapot_8cpp.html#a5584bdb427edfe29e0c0c3753b619161">aspect_ratio</a></div><div class="ttdeci">float aspect_ratio</div><div class="ttdef"><b>Definition:</b> <a href="teapot_8cpp_source.html#l00105">teapot.cpp:105</a></div></div>
<div class="ttc" id="ateapot_8cpp_html_a5804d645f4ed9ff8069c7a182d5a3f16"><div class="ttname"><a href="teapot_8cpp.html#a5804d645f4ed9ff8069c7a182d5a3f16">MessageCallback</a></div><div class="ttdeci">void GLAPIENTRY MessageCallback(GLenum source[[maybe_unused]], GLenum type, GLuint id[[maybe_unused]], GLenum severity, GLsizei length[[maybe_unused]], const GLchar *message, const void *userParam[[maybe_unused]])</div><div class="ttdef"><b>Definition:</b> <a href="teapot_8cpp_source.html#l00067">teapot.cpp:67</a></div></div>
<div class="ttc" id="ateapot_8cpp_html_a6cf87ad83cee592c4a5efef522123a0c"><div class="ttname"><a href="teapot_8cpp.html#a6cf87ad83cee592c4a5efef522123a0c">MSAA_SAMPLES</a></div><div class="ttdeci">constexpr auto MSAA_SAMPLES</div><div class="ttdef"><b>Definition:</b> <a href="teapot_8cpp_source.html#l00048">teapot.cpp:48</a></div></div>
<div class="ttc" id="ateapot_8cpp_html_a7875464aa829a96fb3e7b7be4c1001ad"><div class="ttname"><a href="teapot_8cpp.html#a7875464aa829a96fb3e7b7be4c1001ad">MSAA</a></div><div class="ttdeci">constexpr auto MSAA</div><div class="ttdef"><b>Definition:</b> <a href="teapot_8cpp_source.html#l00047">teapot.cpp:47</a></div></div>
<div class="ttc" id="ateapot_8cpp_html_a8216c1645620cdb2f629cde3ac02ffef"><div class="ttname"><a href="teapot_8cpp.html#a8216c1645620cdb2f629cde3ac02ffef">main</a></div><div class="ttdeci">auto main() -&gt; int</div><div class="ttdef"><b>Definition:</b> <a href="teapot_8cpp_source.html#l00107">teapot.cpp:107</a></div></div>
<div class="ttc" id="ateapot_8cpp_html_a852ed62ba9b4f83fc921ffcabcbcb743"><div class="ttname"><a href="teapot_8cpp.html#a852ed62ba9b4f83fc921ffcabcbcb743">SCR_HEIGHT</a></div><div class="ttdeci">const int32_t SCR_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="teapot_8cpp_source.html#l00060">teapot.cpp:60</a></div></div>
<div class="ttc" id="ateapot_8cpp_html_ad226385a3534a996102879d543fe3ed7"><div class="ttname"><a href="teapot_8cpp.html#ad226385a3534a996102879d543fe3ed7">calc_pyramid_levels</a></div><div class="ttdeci">constexpr auto calc_pyramid_levels(uint32_t width, uint32_t height) -&gt; uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="teapot_8cpp_source.html#l00092">teapot.cpp:92</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
